---
phase: 03-discovery-interface
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [
  "frontend/package.json",
  "frontend/tailwind.config.ts",
  "frontend/tsconfig.json",
  "frontend/next.config.mjs",
  "frontend/app/layout.tsx",
  "frontend/app/page.tsx",
  "frontend/components/ui/",
  "frontend/lib/utils.ts",
  "frontend/lib/api.ts",
  "frontend/hooks/useChallenges.ts"
]
autonomous: true

must_haves:
  truths:
    - "User can access the discovery interface via web browser"
    - "Challenge data loads from Flask API backend"
    - "UI components render with consistent shadcn/ui styling"
  artifacts:
    - path: "frontend/app/layout.tsx"
      provides: "Next.js root layout with QueryClient provider"
      min_lines: 50
    - path: "frontend/lib/api.ts"
      provides: "API client with TanStack Query integration"
      exports: ["fetchChallenges", "spawnChallenge", "validateFlag"]
    - path: "frontend/hooks/useChallenges.ts"
      provides: "React hooks for challenge operations"
      exports: ["useChallenges", "useSpawnChallenge"]
  key_links:
    - from: "frontend/hooks/useChallenges.ts"
      to: "http://localhost:5000/api/challenges"
      via: "fetch in React Query"
      pattern: "useQuery.*fetchChallenges"
    - from: "frontend/app/layout.tsx"
      to: "@tanstack/react-query"
      via: "QueryClient provider"
      pattern: "QueryClientProvider"
---

<objective>
Establish Next.js frontend application with shadcn/ui design system and TanStack Query API integration

Purpose: Create the foundation for the discovery interface that connects to the existing Flask API backend
Output: Working Next.js app with API integration ready for building discovery components
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-discovery-interface/03-RESEARCH.md
@.planning/phases/02-challenge-engine/02-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Create Next.js application with shadcn/ui setup</name>
  <files>
    frontend/package.json
    frontend/tailwind.config.ts
    frontend/tsconfig.json
    frontend/next.config.mjs
    frontend/app/layout.tsx
    frontend/app/page.tsx
    frontend/components/ui/
    frontend/lib/utils.ts
  </files>
  <action>
    Create Next.js 15 application in frontend/ directory using the exact setup from research document. Use create-next-app with TypeScript, Tailwind, and App Router. Initialize shadcn/ui with default configuration and install required shadcn/ui components: button, table, data-table, input, select, badge, card, chart, command. Set up proper Tailwind config and utils file following shadcn/ui conventions. Create root layout with proper HTML structure and metadata. Create basic homepage that will be replaced with discovery interface.
  </action>
  <verify>
    cd frontend && npm run build succeeds without errors
  </verify>
  <done>
    Next.js app builds successfully with shadcn/ui components available and Tailwind CSS configured
  </done>
</task>

<task type="auto">
  <name>Implement API integration layer with TanStack Query</name>
  <files>
    frontend/lib/api.ts
    frontend/hooks/useChallenges.ts
    frontend/app/layout.tsx
  </files>
  <action>
    Install TanStack Query (@tanstack/react-query) and create API client layer. Create api.ts with functions: fetchChallenges (GET /api/challenges), spawnChallenge (POST /api/challenges), stopChallenge (DELETE /api/challenges/{sessionId}), validateFlag (POST /api/flags). Each function should include proper TypeScript types, error handling, and JSON serialization. Create useChallenges.ts with React Query hooks: useChallenges (for listing), useSpawnChallenge (mutation), useStopChallenge (mutation), useValidateFlag (mutation). Configure QueryClient in layout.tsx with proper error handling and stale time settings (5 minutes). All API calls should target http://localhost:5000 (Flask API backend).
  </action>
  <verify>
    cd frontend && npm run build succeeds and TypeScript compilation passes without errors
  </verify>
  <done>
    API client functions are defined with TypeScript types, React Query hooks are available, QueryClient provider is configured in app layout
  </done>
</task>

</tasks>

<verification>
- Next.js app starts with `npm run dev` without errors
- shadcn/ui components can be imported and used
- TanStack Query is properly configured with QueryClient provider
- API functions are typed and available for use
</verification>

<success_criteria>
- Working Next.js 15 application with TypeScript and App Router
- shadcn/ui components installed and configured with Tailwind CSS
- TanStack Query integrated with React Query hooks for all API operations
- API client layer ready to communicate with Flask backend at localhost:5000
</success_criteria>

<output>
After completion, create `.planning/phases/03-discovery-interface/03-01-SUMMARY.md`
</output>