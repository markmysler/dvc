---
phase: 04-polish-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [
  "frontend/components/enhanced/challenge-card-enhanced.tsx",
  "frontend/components/enhanced/loading-skeleton.tsx",
  "frontend/components/enhanced/progress-indicator.tsx",
  "api/validation/schemas/challenge-schema.js",
  "api/validation/security/container-security.js",
  "api/validation/validators.js",
  "scripts/validate-challenge.py",
  "package.json"
]
autonomous: true

must_haves:
  truths:
    - "All UI components display consistent shadcn/ui styling and professional appearance"
    - "Challenge validation system prevents security vulnerabilities and provides helpful error messages"
    - "Developer helper script provides immediate validation feedback"
  artifacts:
    - path: "frontend/components/enhanced/challenge-card-enhanced.tsx"
      provides: "Professional challenge card with enhanced styling"
      contains: "shadcn/ui composition"
    - path: "api/validation/schemas/challenge-schema.js"
      provides: "JSON schema for challenge validation"
      exports: ["challengeSchema"]
    - path: "api/validation/security/container-security.js"
      provides: "Container security validation"
      exports: ["validateContainerSecurity"]
    - path: "scripts/validate-challenge.py"
      provides: "Development validation helper"
      contains: "CLI validation script"
  key_links:
    - from: "frontend/components/enhanced/"
      to: "frontend/components/ui/"
      via: "shadcn/ui component composition"
      pattern: "import.*@/components/ui/"
    - from: "api/validation/validators.js"
      to: "api/validation/schemas/"
      via: "AJV schema compilation"
      pattern: "ajv\\.compile\\(.*Schema\\)"
    - from: "scripts/validate-challenge.py"
      to: "api/validation/"
      via: "validation system integration"
      pattern: "require.*validation"
---

<objective>
Implement professional UX polish using shadcn/ui composition patterns and comprehensive challenge import validation system with security checks.

Purpose: Provides consistent design system compliance and secure challenge import foundation for extensible challenge management.
Output: Enhanced UI components, validation schema with security checks, and developer validation script.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-polish-enhancement/04-CONTEXT.md
@.planning/phases/04-polish-enhancement/04-RESEARCH.md
@frontend/package.json
@challenges/definitions/challenges.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhanced UI Components with shadcn/ui Polish</name>
  <files>
    frontend/components/enhanced/challenge-card-enhanced.tsx
    frontend/components/enhanced/loading-skeleton.tsx
    frontend/components/enhanced/progress-indicator.tsx
    package.json
  </files>
  <action>
    Install react-loading-skeleton for professional loading states: `npm install react-loading-skeleton`

    Create enhanced challenge card component that composes shadcn/ui components with professional styling:
    - Use Card, CardContent, CardHeader from shadcn/ui as base
    - Add hover effects, smooth transitions, improved typography
    - Include enhanced loading skeleton with content-aware placeholders
    - Follow shadcn/ui composition patterns (never modify base components directly)
    - Use class-variance-authority for consistent variants
    - Apply Tailwind classes for professional appearance: shadows, animations, spacing

    Create loading skeleton component using react-loading-skeleton:
    - Content-aware skeleton for challenge cards matching structure
    - Professional loading indicators for forms and data tables
    - Consistent with existing shadcn/ui theme

    Create enhanced progress indicator that extends shadcn/ui Progress:
    - Smooth animations, percentage display, color variants
    - Maintains shadcn/ui design system compliance
  </action>
  <verify>npm list react-loading-skeleton && find frontend/components/enhanced -name "*.tsx" | wc -l | grep -q "3"</verify>
  <done>Enhanced UI components exist using shadcn/ui composition patterns with professional styling, loading states, and consistent design system compliance</done>
</task>

<task type="auto">
  <name>Task 2: Challenge Import Validation System with Security Checks</name>
  <files>
    api/validation/schemas/challenge-schema.js
    api/validation/security/container-security.js
    api/validation/validators.js
    scripts/validate-challenge.py
  </files>
  <action>
    Install AJV validation library: `npm install ajv ajv-formats`

    Create challenge JSON schema following research patterns:
    - Define complete schema with required fields: name, description, difficulty, container
    - Enforce security constraints: privileged: false, capabilities whitelist
    - Include format validation for ports, environment variables
    - Set size limits and string constraints
    - Use AJV-compatible schema format for performance

    Create container security validation module:
    - Validate against privileged mode (must be false or undefined)
    - Whitelist allowed capabilities (only NET_ADMIN if needed)
    - Check for dangerous Docker options, volume mounts
    - Validate port ranges and environment variable formats
    - Return detailed error objects with fix suggestions

    Create main validation orchestrator:
    - Compile AJV schemas for performance
    - Chain JSON schema → security → file structure validation
    - Provide user-friendly error mapping from technical AJV errors
    - Include comprehensive error reporting with specific fixes

    Create development helper script:
    - CLI tool for immediate validation feedback
    - Accept challenge JSON file path as argument
    - Output formatted validation results with color coding
    - Provide specific fix suggestions for each validation error
  </action>
  <verify>find api/validation -name "*.js" | wc -l | grep -q "2" && test -f scripts/validate-challenge.py</verify>
  <done>Challenge validation system with AJV schema compilation, container security checks, and development helper script providing immediate validation feedback</done>
</task>

</tasks>

<verification>
Run enhanced component development server: `cd frontend && npm run dev`
Test validation system: `python3 scripts/validate-challenge.py challenges/definitions/challenges.json`
</verification>

<success_criteria>
- Enhanced UI components display professional styling using shadcn/ui composition
- Challenge validation prevents security vulnerabilities and provides helpful errors
- Development workflow includes immediate validation feedback script
- All components maintain design system consistency
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-enhancement/04-01-SUMMARY.md`
</output>