---
phase: 01-foundation-security
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, docker-compose.yml, scripts/setup.sh, README.md, .gitignore]
autonomous: true

must_haves:
  truths:
    - "User can run 'npm run setup' to install all dependencies locally"
    - "System supports both x64 and ARM64 container architectures"
    - "Platform operates entirely locally without external dependencies"
  artifacts:
    - path: "docker-compose.yml"
      provides: "Container orchestration configuration"
      contains: "services"
    - path: "docker-compose.yml"
      provides: "Local container orchestration"
      min_lines: 20
    - path: "scripts/setup.sh"
      provides: "Automated platform setup"
      exports: ["setup", "verify"]
  key_links:
    - from: "docker-compose.yml"
      to: "docker"
      via: "docker compose up"
      pattern: "docker.*compose"
---

<objective>
Establish the foundational project structure and Docker container runtime for secure cybersecurity training platform.

Purpose: Creates the containerized, Docker-based foundation that all subsequent phases will build upon. Ensures platform can operate via Docker Compose with proper container isolation.
Output: Complete project setup with Docker runtime, Docker Compose orchestration, and automated deployment.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-security/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Create Project Structure</name>
  <files>README.md, .gitignore, START_SERVICES.md</files>
  <action>
    Create README.md with:
    - Project description and core value proposition
    - Docker Compose architecture explanation
    - Quick start instructions (docker compose up -d)
    - Architecture overview (Docker + Flask + Next.js + monitoring)

    Create START_SERVICES.md with:
    - Docker Compose startup commands
    - Service access URLs and ports
    - Log viewing commands

    Update .gitignore excluding:
    - node_modules, .env files
    - Container logs (logs/*)
    - Monitoring data (monitoring/data/*)
    - Temporary container configs (tmp/)
    - Python cache and virtual environments
  </action>
  <verify>ls README.md START_SERVICES.md .gitignore</verify>
  <done>Project has comprehensive README, service documentation, and proper .gitignore</done>
</task>

<task type="auto">
  <name>Create Container Orchestration</name>
  <files>docker-compose.yml, scripts/setup.sh</files>
  <action>
    Create docker-compose.yml for Docker Compose with:
    - API service (Flask backend)
    - Frontend service (Next.js)
    - Prometheus service (metrics collection)
    - Grafana service (metrics visualization)
    - Node Exporter service (system metrics)
    - cAdvisor service (container metrics)
    - Volume mounts for persistent configs and data
    - Network isolation between services
    - Environment variables for configuration
    - Security options (no-new-privileges, cap-drop, read-only where applicable)

    Create scripts/setup.sh with executable permissions:
    - Check for Docker and Docker Compose installation
    - Create necessary directories (logs/, monitoring/data/, security/)
    - Set proper permissions for data directories
    - Initialize monitoring configuration
    - Verify installation with health checks
  </action>
  <verify>chmod +x scripts/setup.sh && docker compose config</verify>
  <done>Setup script verifies Docker installation, docker-compose.yml defines complete service stack</done>
</task>

<task type="auto">
  <name>Validate Docker Deployment</name>
  <files>scripts/verify.sh</files>
  <action>
    Create scripts/verify.sh with executable permissions to validate:
    - Docker and Docker Compose are installed
    - All services defined in docker-compose.yml
    - Container isolation (containers cannot access host filesystem)
    - Network isolation between service groups
    - Volume mounts for data persistence

    Script should test:
    - docker version and docker compose version
    - docker compose config validation
    - Service health checks
    - Network connectivity between services
    - Volume permissions and persistence
  </action>
  <verify>chmod +x scripts/verify.sh && ./scripts/verify.sh</verify>
  <done>Verification script confirms Docker Compose deployment with proper isolation and service connectivity</done>
</task>

</tasks>

<verification>
- Run `docker compose up -d` starts all services without errors
- Run `docker compose ps` shows all services running
- Run `scripts/verify.sh` passes all checks
- All services accessible at defined ports
- Monitoring dashboards accessible (Grafana on :3000)
</verification>

<success_criteria>
- **CHAL-08**: Platform operates via Docker Compose - verified by compose config and startup
- **INFR-04**: Container deployment - confirmed by running services
- Foundation established for secure container isolation and resource management
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-security/01-01-SUMMARY.md`
</output>